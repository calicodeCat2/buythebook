<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <!--Import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <!-- Compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="light-blue darken-1 nav-extended">
      <div class="nav-wrapper">
        <ul class="right hide-on-med-and-down">
          <li>
            <a href="/"><i class="material-icons left">home</i>Home</a>
          </li>

          <!-- Both login options disappear when user/blogger logged in -->
          <% if(!loggedInUser && !loggedInAdmin && !loggedInBlogger) { %>

          <li>
            <a href="/blogger/login"
              ><i class="material-icons left">create</i>Write With Us</a
            >
          </li>

          <li>
            <a href="/user/login"
              ><i class="material-icons left">account_box</i>Login</a
            >
          </li>

          <% } %>

          <!-- USER ONLY LOGIN OPTIONS -->
          <% if(loggedInUser) { %>
          <li>
            <a href="/users/main"
              ><i class="material-icons left">dashboard</i>Dashboard</a
            >
          </li>

          <li>
            <a href="/user/comments"
              ><i class="material-icons left">comment</i>My Comments</a
            >
          </li>

          <li>
            <a href="/user/profile"
              ><i class="material-icons left">person</i>Profile</a
            >
          </li>

          <li>
            <a href="/user/logout"
              ><i class="material-icons left">exit_to_app</i>Logout</a
            >
          </li>
          <% } %>

          <!-- BLOGGER ONLY OPTIONS -->
          <% if (loggedInBlogger) { %>

          <li>
            <a href="/blogger/home"
              ><i class="material-icons left">dashboard</i>Dashboard</a
            >
          </li>

          <li>
            <a href="/blogger/new"
              ><i class="material-icons left">create</i>New Blog</a
            >
          </li>

          <li>
            <a href="/blogger/messages"
              ><i class="material-icons left">message</i>Admin Messages</a
            >
          </li>

          <li>
            <a href="/blogger/logout"
              ><i class="material-icons left">exit_to_app</i>Logout</a
            >
          </li>

          <% } %>

          <!-- ADMIN ONLY OPTIONS -->
          <% if(loggedInAdmin) { %>

          <li>
            <a href="/admin/home"
              ><i class="material-icons left">dashboard</i>Dashboard</a
            >
          </li>
          <li>
            <a href="/admin/logout"
              ><i class="material-icons left">exit_to_app</i>Logout</a
            >
          </li>
          <% } %>
        </ul>
      </div>

      <% if(loggedInAdmin) { %>
      <div class="nav-content">
        <ul class="tabs tabs-transparent">
          <li><a href="/admin/pending-regs">Pending Bloggers</a></li>
          <li><a href="/admin/pending-blogs">Pending Blogs</a></li>
          <li><a href="/admin/approved-blogs">Manage Blogs</a></li>
          <li><a href="/admin/user-bans">User Ban Requests</a></li>
        </ul>
      </div>
      <% } %>
    </nav>
    <!-- end of navbar -->

    <!-- beginning of main content -->
    <h1>Welcome, <%= admin.blogger_name %></h1>

    <section class="pending-bloggers">
      <h2>Pending Blogger Applications</h2>
      <% if(!firstThreeRegs) { %>
      <p>You currently have no pending blogger applications.</p>
      <% } %>
      <ul>
        <% for(let i = 0; i < firstThreeRegs.length; i++) { %>
        <li>
          <h3><%= firstThreeRegs[i].blogger_name %></h3>
          <img src="<%= firstThreeRegs[i].image_url %>" alt="" />
          <p>Requested On: <%= requestedOn[i] %></p>
          <p>Years Blogging: <%= firstThreeRegs[i].years_blogging %></p>
          <p>
            Blogger Website: <a href="<%= firstThreeRegs[i].link %>">Website</a>
          </p>
          <p>Genre: <%= firstThreeRegs[i].genre %></p>
          <p>
            Writing Snippet: <%= firstThreeRegs[i].sample.slice(0, 140) + "..."
            %>
          </p>
          <a href="/admin/view/blogger/<%= firstThreeRegs[i].id %>"
            >View Blogger</a
          >
          <span> | </span>
          <a href="/admin/approve/blogger/<%= firstThreeRegs[i].id %>"
            >Approve Blogger</a
          >
          <span> | </span>
          <a href="/admin/reject/blogger/<%= firstThreeRegs[i].id %>"
            >Reject Blogger</a
          >
          <hr />
        </li>
        <% } %>
        <a href="/admin/pending-regs">View All</a>
      </ul>
    </section>

    <section class="pending-blogs">
      <h2>Pending Blog Posts</h2>
      <% if(!firstThreeBlogs) { %>
      <p>You currently have no pending blog posts.</p>
      <% } %>
      <ul>
        <% for (let i = 0; i < firstThreeBlogs.length; i++) { %>
        <li>
          <h3><%= firstThreeBlogs[i].blog_title %></h3>
          <h4>Post Created On: <%= blogCreatedOn[i] %></h4>
          <h4>By: <%= firstThreeBlogs[i].blogger_name %></h4>
          <p>
            Preview: <%= firstThreeBlogs[i].blog_content.slice(0, 140) + "..."
            %>
          </p>
          <a href="/admin/view/blog/<%= firstThreeBlogs[i].id %>">View Blog</a>
          <span> | </span>
          <a href="/admin/approve/blog/<%= firstThreeBlogs[i].id %>"
            >Approve Blog</a
          >
          <span> | </span>
          <a href="/admin/reject/blog/<%= firstThreeBlogs[i].id %>"
            >Reject Blog</a
          >
          <hr />
        </li>
        <% } %>
        <a href="/admin/pending-blogs">View All</a>
      </ul>
    </section>

    <section class="approved-blogs">
      <h2>Approved Blog Posts</h2>
      <% if(!firstThreeApprovedBlogs) { %>
      <p>You currently have no approved blog posts.</p>
      <% } %>
      <ul>
        <% for (let i = 0; i < firstThreeApprovedBlogs.length; i++) { %>
        <li>
          <h3><%= firstThreeApprovedBlogs[i].blog_title %></h3>
          <h4>Post Created On: <%= approvedBlogCreatedOn[i] %></h4>
          <h4>By: <%= firstThreeApprovedBlogs[i].blogger_name %></h4>
          <p>
            Preview: <%= firstThreeApprovedBlogs[i].blog_content.slice(0, 140) +
            "..." %>
          </p>
          <a
            href="/admin/view/approved-blog/<%= firstThreeApprovedBlogs[i].id %>"
            >View Blog</a
          >
          <hr />
        </li>
        <% } %>
        <a href="/admin/approved-blogs">View All</a>
      </ul>
    </section>

    <section class="pending-ban-requests">
      <h2>Pending User Ban Requests</h2>
      <% if(!firstThreeBanReqs) { %>
      <p>You currently have no pending ban requests.</p>
      <% } %>
      <ul>
        <% for(let i = 0; i < firstThreeBanReqs.length; i++) { %>
        <li>
          <h4>Screen Name: <%= firstThreeBanReqs[i].screen_name %></h4>
          <a href="/admin/users/ban/<%= firstThreeBanReqs[i].id %>"
            >Approve Ban</a
          >
          <span> | </span>
          <a href="/admin/users/view/<%= firstThreeBanReqs[i].id %>"
            >View User</a
          >
          <span> | </span>
          <a href="/admin/users/unban/<%= firstThreeBanReqs[i].id %>"
            >Reject Ban</a
          >
        </li>
        <% } %>
        <a href="/admin/user-bans">View All</a>
      </ul>
    </section>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="../script.js"></script>
  </body>
</html>
